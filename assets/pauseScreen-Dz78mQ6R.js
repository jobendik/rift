import{S as M,P as B,A as S,D as w,W as I,a as R,b as k,R as v,L as A,c as z,C as W,U as b,V as D,E as G,F as H,g as O,B as P,d as C,e as T}from"./index-DkSXl7P6.js";let i,r,e,a,d,E,c,p=!1,u=null;function U(){if(p)return;p=!0,i=new M,i.background=null;const t=350/450;r=new B(38,t,.1,1e3),r.position.set(0,.2,6),r.lookAt(0,0,0);const l=new S(4210752,3);i.add(l);const o=new w(16777215,5);o.position.set(0,5,5),i.add(o);const n=new w(4482815,4);n.position.set(0,2,-5),i.add(n);const s=new w(16755336,2);s.position.set(-5,0,2),i.add(s),e=new I({antialias:!0,alpha:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!0,precision:"highp"}),e.setSize(350,450),e.outputColorSpace=R,e.setClearColor(0,0);try{const x=new k(350,450,{minFilter:A,magFilter:A,format:v,encoding:void 0,samples:4}),f=new z(i,r);f.clear=!0,f.clearColor=new W(0,0,0),f.clearAlpha=0;const F=new b(new D(350,450),.4,.35,.85);c=new G(e,x),c.addPass(f),c.addPass(F)}catch(x){console.error("Post-processing setup failed:",x)}const y=document.getElementById("pauseModelContainer");y&&(y.innerHTML="",y.appendChild(e.domElement),e.domElement.style.position="absolute",e.domElement.style.bottom="0px",e.domElement.style.left="50%",e.domElement.style.transform="translateX(-50%)",e.domElement.style.width="350px",e.domElement.style.height="450px",e.domElement.style.maxWidth="350px",e.domElement.style.maxHeight="450px",e.domElement.style.objectFit="contain",e.domElement.style.zIndex="5",e.domElement.style.pointerEvents="none",e.domElement.style.background="transparent",e.domElement.style.backgroundColor="transparent",e.domElement.classList.add("transparent-canvas")),E=new T,V(),window.addEventListener("resize",L,!1)}function V(){const t=new H,l=O("models","soldierFrontPage.fbx");console.log(`Loading soldier model for pause screen from ${l}`),t.load(l,o=>{console.log("Soldier model loaded successfully for pause screen"),a=o;let n=new P().setFromObject(a);n.max.y-n.min.y,n.max.x-n.min.x;const s=.011;a.scale.set(s,s,s);let m=-n.min.y*s;a.position.set(0,m-.4,0),a.rotation.y=Math.PI*.9,o.animations&&o.animations.length?(console.log(`Found ${o.animations.length} animations for pause screen model`),d=new C(o),d.clipAction(o.animations[0]).play()):console.log("No animations found in the model for pause screen"),i.add(a),g()},o=>{console.log(`Pause screen model loading: ${Math.floor(o.loaded/o.total*100)}% loaded`)},o=>{console.error("Error loading pause screen soldier model:",o),console.log("Attempting to load from alternate path: /rift/models/soldierFrontPage.fbx"),t.load("/rift/models/soldierFrontPage.fbx",n=>{console.log("Soldier model loaded successfully from alternate path for pause screen"),a=n;let s=new P().setFromObject(a);s.max.y-s.min.y,s.max.x-s.min.x;const m=.011;a.scale.set(m,m,m);let h=-s.min.y*m;a.position.set(0,h-.4,0),a.rotation.y=Math.PI*.9,n.animations&&n.animations.length&&(d=new C(n),d.clipAction(n.animations[0]).play()),i.add(a),g()},null,()=>{console.error("All attempts to load the pause screen model failed"),g()})})}function g(){if(!p)return;u=requestAnimationFrame(g);const t=E.getDelta(),l=E.getElapsedTime();a&&(a.rotation.y=l*.15%(Math.PI*2)+Math.PI*.7),d&&d.update(t),e.setClearColor(0,0),i.background=null,e.setViewport(0,0,350,450),c?(e.clear(),c.render()):(e.clear(),e.render(i,r))}function L(){if(!r||!e)return;const t=350/450;r.aspect=t,r.updateProjectionMatrix(),e.setSize(350,450),c&&c.setSize(350,450);const l=document.getElementById("pauseModelContainer");l&&(l.style.width="350px",l.style.height="450px")}function X(){p&&(u!==null&&(cancelAnimationFrame(u),u=null),window.removeEventListener("resize",L),d&&d.stopAllAction(),e&&e.dispose(),i&&i.traverse(t=>{t.isMesh&&(t.geometry.dispose(),t.material&&(Array.isArray(t.material)?t.material.forEach(l=>l.dispose()):t.material.dispose()))}),p=!1)}export{X as cleanup,U as init};
//# sourceMappingURL=pauseScreen-Dz78mQ6R.js.map
