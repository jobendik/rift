import{S as L,P as M,A as B,D as x,W as S,a as I,b as R,R as k,L as E,c as v,C as z,U as b,V as W,E as D,F as G,B as A,d as P,e as H}from"./index-DS3vilyv.js";let i,r,e,a,d,w,m,c=!1,f=null;function U(){if(c)return;c=!0,i=new L,i.background=null;const o=350/450;r=new M(38,o,.1,1e3),r.position.set(0,.2,6),r.lookAt(0,0,0);const t=new B(4210752,3);i.add(t);const n=new x(16777215,5);n.position.set(0,5,5),i.add(n);const s=new x(4482815,4);s.position.set(0,2,-5),i.add(s);const l=new x(16755336,2);l.position.set(-5,0,2),i.add(l),e=new S({antialias:!0,alpha:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!0,precision:"highp"}),e.setSize(350,450),e.outputColorSpace=I,e.setClearColor(0,0);try{const y=new R(350,450,{minFilter:E,magFilter:E,format:k,encoding:void 0,samples:4}),p=new v(i,r);p.clear=!0,p.clearColor=new z(0,0,0),p.clearAlpha=0;const F=new b(new W(350,450),.4,.35,.85);m=new D(e,y),m.addPass(p),m.addPass(F)}catch(y){console.error("Post-processing setup failed:",y)}const h=document.getElementById("pauseModelContainer");h&&(h.innerHTML="",h.appendChild(e.domElement),e.domElement.style.position="absolute",e.domElement.style.bottom="0px",e.domElement.style.left="50%",e.domElement.style.transform="translateX(-50%)",e.domElement.style.width="350px",e.domElement.style.height="450px",e.domElement.style.maxWidth="350px",e.domElement.style.maxHeight="450px",e.domElement.style.objectFit="contain",e.domElement.style.zIndex="5",e.domElement.style.pointerEvents="none",e.domElement.style.background="transparent",e.domElement.style.backgroundColor="transparent",e.domElement.classList.add("transparent-canvas")),w=new H,O(),window.addEventListener("resize",C,!1)}function O(){const o=new G;console.log("Loading soldier model for pause screen from models/soldierFrontPage.fbx"),o.load("models/soldierFrontPage.fbx",t=>{console.log("Soldier model loaded successfully for pause screen"),a=t;let n=new A().setFromObject(a);n.max.y-n.min.y,n.max.x-n.min.x;const s=.011;a.scale.set(s,s,s);let l=-n.min.y*s;a.position.set(0,l-.4,0),a.rotation.y=Math.PI*.9,t.animations&&t.animations.length?(console.log(`Found ${t.animations.length} animations for pause screen model`),d=new P(t),d.clipAction(t.animations[0]).play()):console.log("No animations found in the model for pause screen"),i.add(a),u()},t=>{console.log(`Pause screen model loading: ${Math.floor(t.loaded/t.total*100)}% loaded`)},t=>{console.error("Error loading pause screen soldier model:",t),console.log("Attempting to load from alternate path: /models/soldierFrontPage.fbx"),o.load("/models/soldierFrontPage.fbx",n=>{console.log("Soldier model loaded successfully from alternate path for pause screen"),a=n;let s=new A().setFromObject(a);s.max.y-s.min.y,s.max.x-s.min.x;const l=.011;a.scale.set(l,l,l);let g=-s.min.y*l;a.position.set(0,g-.4,0),a.rotation.y=Math.PI*.9,n.animations&&n.animations.length&&(d=new P(n),d.clipAction(n.animations[0]).play()),i.add(a),u()},null,()=>{console.error("All attempts to load the pause screen model failed"),u()})})}function u(){if(!c)return;f=requestAnimationFrame(u);const o=w.getDelta(),t=w.getElapsedTime();a&&(a.rotation.y=t*.15%(Math.PI*2)+Math.PI*.7),d&&d.update(o),e.setClearColor(0,0),i.background=null,e.setViewport(0,0,350,450),m?(e.clear(),m.render()):(e.clear(),e.render(i,r))}function C(){if(!r||!e)return;const o=350/450;r.aspect=o,r.updateProjectionMatrix(),e.setSize(350,450),m&&m.setSize(350,450);const t=document.getElementById("pauseModelContainer");t&&(t.style.width="350px",t.style.height="450px")}function X(){c&&(f!==null&&(cancelAnimationFrame(f),f=null),window.removeEventListener("resize",C),d&&d.stopAllAction(),e&&e.dispose(),i&&i.traverse(o=>{o.isMesh&&(o.geometry.dispose(),o.material&&(Array.isArray(o.material)?o.material.forEach(t=>t.dispose()):o.material.dispose()))}),c=!1)}export{X as cleanup,U as init};
//# sourceMappingURL=pauseScreen-C2DdYcRM.js.map
